---
import type { ServicePillar } from "../../data/service";
import SkewedImage from "../ui/SkewedImage.astro";
import { createSlug } from "../../utils/slug";

interface Props {
  pillar: ServicePillar;
  isReversed?: boolean;
}

const { pillar, isReversed = false } = Astro.props;
const slugId = createSlug(pillar.title);
const clipPathId = `${slugId}-clip`;
const shapeId = `${slugId}-shape`;
---

<article
  class="container mx-auto px-4 py-8 sm:px-6 sm:py-12 lg:px-8 lg:py-24 border-b border-gray-100 last:border-0 dark:border-white/5"
  role="region"
  aria-labelledby={slugId}
>
  <div
    class={`relative isolate flex flex-col gap-6 sm:gap-8 lg:gap-12 lg:flex-row ${isReversed ? "lg:flex-row-reverse" : ""}`}
  >
    <div
      aria-hidden="true"
      class="pointer-events-none absolute inset-0 opacity-50 dark:opacity-20"
    >
      <div
        class="absolute -left-16 top-0 h-48 w-48 rounded-full bg-brand-blue/10 blur-3xl"
      >
      </div>
      <div
        class="absolute -right-10 bottom-0 h-64 w-64 rounded-full bg-brand-gold/10 blur-3xl"
      >
      </div>
    </div>

    <div
      class="relative z-10 flex-1 space-y-4 sm:space-y-6 lg:space-y-8 text-gray-900 dark:text-gray-100"
    >
      <p
        class="inline-flex items-center gap-3 text-sm font-bold uppercase tracking-widest text-brand-blue dark:text-brand-gold"
      >
        <span class="h-px w-8 bg-brand-blue/40 dark:bg-brand-gold/40"></span>
        {pillar.subtitle}
      </p>

      <h2
        id={slugId}
        class="text-2xl sm:text-3xl font-bold leading-tight text-gray-900 dark:text-white lg:text-4xl"
      >
        {pillar.title}
      </h2>

      <p
        class="text-base sm:text-lg leading-relaxed text-gray-600 dark:text-gray-300 max-w-3xl"
      >
        {pillar.description}
      </p>

      <div class="grid gap-4 sm:grid-cols-3 sm:gap-6">
        {
          pillar.cards.map((card) => (
            <div class="rounded-xl border border-gray-100 bg-white/50 p-4 dark:border-white/5 dark:bg-white/5 sm:p-5">
              <h3 class="text-base font-bold text-gray-900 dark:text-white">
                {card.title}
              </h3>
              <p class="mt-2 text-sm leading-relaxed text-gray-600 dark:text-gray-400">
                {card.description}
              </p>
            </div>
          ))
        }
      </div>
    </div>

    <div
      class="relative z-10 hidden flex-1 items-center justify-center lg:flex lg:max-w-md"
    >
      <SkewedImage
        imageUrl={pillar.image}
        imageAlt={pillar.title}
        clipPathId={clipPathId}
        shapeId={shapeId}
      />
    </div>
  </div>
</article>
